<!DOCTYPE html>
<html>
    <head>
        <title>AWOL QWIXX</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <div class="row" id="red">
            <button class="gameBoardColor" data-color="red" data-value="2">2</button>
            <button class="gameBoardColor" data-color="red" data-value="3">3</button>
            <button class="gameBoardColor" data-color="red" data-value="4">4</button>
            <button class="gameBoardColor" data-color="red" data-value="5">5</button>
            <button class="gameBoardColor" data-color="red" data-value="6">6</button>
            <button class="gameBoardColor" data-color="red" data-value="7">7</button>
            <button class="gameBoardColor" data-color="red" data-value="8">8</button>
            <button class="gameBoardColor" data-color="red" data-value="9">9</button>
            <button class="gameBoardColor" data-color="red" data-value="10">10</button>
            <button class="gameBoardColor" data-color="red" data-value="11">11</button>
            <button class="gameBoardColor" data-color="red" data-value="12">12</button>
        </div>
        <br />

        <div class="row" id="yellow">
            <button class="gameBoardColor" data-color="yellow" data-value="2">2</button>
            <button class="gameBoardColor" data-color="yellow" data-value="3">3</button>
            <button class="gameBoardColor" data-color="yellow" data-value="4">4</button>
            <button class="gameBoardColor" data-color="yellow" data-value="5">5</button>
            <button class="gameBoardColor" data-color="yellow" data-value="6">6</button>
            <button class="gameBoardColor" data-color="yellow" data-value="7">7</button>
            <button class="gameBoardColor" data-color="yellow" data-value="8">8</button>
            <button class="gameBoardColor" data-color="yellow" data-value="9">9</button>
            <button class="gameBoardColor" data-color="yellow" data-value="10">10</button>
            <button class="gameBoardColor" data-color="yellow" data-value="11">11</button>
            <button class="gameBoardColor" data-color="yellow" data-value="12">12</button>
        </div>
        <br/>

        <div class="row" id="green">
            <button class="gameBoardColor" data-color="green" data-value="12">12</button>
            <button class="gameBoardColor" data-color="green" data-value="11">11</button>
            <button class="gameBoardColor" data-color="green" data-value="10">10</button>
            <button class="gameBoardColor" data-color="green" data-value="9">9</button>
            <button class="gameBoardColor" data-color="green" data-value="8">8</button>
            <button class="gameBoardColor" data-color="green" data-value="7">7</button>
            <button class="gameBoardColor" data-color="green" data-value="6">6</button>
            <button class="gameBoardColor" data-color="green" data-value="5">5</button>
            <button class="gameBoardColor" data-color="green" data-value="4">4</button>
            <button class="gameBoardColor" data-color="green" data-value="3">3</button>
            <button class="gameBoardColor" data-color="green" data-value="2">2</button>
        </div>
        <br/>

        <div class="row" id="blue">
            <button class="gameBoardColor"  data-color="blue" data-value="12">12</button>
            <button class="gameBoardColor"  data-color="blue" data-value="11">11</button>
            <button class="gameBoardColor"  data-color="blue" data-value="10">10</button>
            <button class="gameBoardColor"  data-color="blue" data-value="9">9</button>
            <button class="gameBoardColor"  data-color="blue" data-value="8">8</button>
            <button class="gameBoardColor"  data-color="blue" data-value="7">7</button>
            <button class="gameBoardColor"  data-color="blue" data-value="6">6</button>
            <button class="gameBoardColor"  data-color="blue" data-value="5">5</button>
            <button class="gameBoardColor"  data-color="blue" data-value="4">4</button>
            <button class="gameBoardColor"  data-color="blue" data-value="3">3</button>
            <button class="gameBoardColor"  data-color="blue" data-value="2">2</button>
        </div>
        <br />

        <div class="row" id="points">
            <div class="points">
                1x <hr />
                1
            </div>
            <div class="points">
                2x <hr />
                3
            </div>
            <div class="points">
                3x <hr />
                6
            </div>
            <div class="points">
                4x <hr />
                10
            </div>
            <div class="points">
                5x <hr />
                15
            </div>
            <div class="points">
                6x <hr />
                21
            </div>
            <div class="points">
                7x <hr />
                28
            </div>
            <div class="points">
                8x <hr />
                36
            </div>
            <div class="points">
                9x <hr />
                45
            </div>
            <div class="points">
                10x <hr />
                55
            </div>
            <div class="points">
                11x <hr />
                66
            </div>
            <div class="points">
                12x <hr />
                78
            </div>
        </div>

        <div class="row" id="strikeout">
            <button class="strike"></button>
            <button class="strike"></button>
            <button class="strike"></button>
            <button class="strike"></button>
        </div>

        <br/>

        <div class="row" id="totals" style="border: 1px solid red;">
            Totals: 
            <div class="totals" id="red-total">0</div>
            +
            <div class="totals" id="yellow-total">0</div>
            +
            <div class="totals" id="green-total">0</div>
            +
            <div class="totals" id="blue-total">0</div>
            -
            <div class="totals" id="strike-total">0</div>
            =
            <div class="totals" id="score">0</div>
        </div>

        <hr /> 

        <div class="row" id="messageCenter">
            <h1> Welcome to the game</h1>
            <p>Please roll the dice to begin the game</p>
        </div>

        <hr />

        <div class="row" id="diceArea">

            <button class="white" id="die1">-</button>
            <button class="white" id="die2">-</button>

            <button class="colored blue" id="die3">-</button>
            <button class="colored green" id="die4">-</button>
            <button class="colored yellow" id="die5">-</button>
            <button class="colored red" id="die6">-</button>

            <button id="diceRoll">Roll</button>
        </div> 

    </body>
    <script src="dice.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>

    <script>
        // white, skip, everything (all colors), endOfGame
        var gameMode = 'white'; 

        var score = {
            
            // option 1: 
            // state 1; the item is scored and counts towards our score 
            // { value: 2, scored: true, disabled: true    }
            // state 2: the item is not scored but not yet disabled / crossed out
            // { value: 2, scored: false, disabled: false    }
            // state 3: the item is not scored but disabled 
            // { value: 2, scored: false, disabled: true    }

            // option 1a: (Robert)
            // { 2: {scored: false, disabled: false} }
            // 

            // option 2 
            // 2 running tallies, 
            // numbers not counted towards the score
            // var score = { yellow: [] }
            // items to the left of the value that have not already been scored 
            // var noLongerValidOptions = { yellow: [] }
            // numbers counted towards the score
            yellow: { 2: {scored: false, disabled: false},
            3: {scored: false, disabled: false},
            4: {scored: false, disabled: false},
            5: {scored: false, disabled: false},
            6: {scored: false, disabled: false},
            7: {scored: false, disabled: false},
            8: {scored: false, disabled: false},
            9: {scored: false, disabled: false},
            10: {scored: false, disabled: false},
            11: {scored: false, disabled: false},
            12: {scored: false, disabled: false} },
            red: { 2: {scored: false, disabled: false},
            3: {scored: false, disabled: false},
            4: {scored: false, disabled: false},
            5: {scored: false, disabled: false},
            6: {scored: false, disabled: false},
            7: {scored: false, disabled: false},
            8: {scored: false, disabled: false},
            9: {scored: false, disabled: false},
            10: {scored: false, disabled: false},
            11: {scored: false, disabled: false},
            12: {scored: false, disabled: false} },
            green: { 2: {scored: false, disabled: false},
            3: {scored: false, disabled: false},
            4: {scored: false, disabled: false},
            5: {scored: false, disabled: false},
            6: {scored: false, disabled: false},
            7: {scored: false, disabled: false},
            8: {scored: false, disabled: false},
            9: {scored: false, disabled: false},
            10: {scored: false, disabled: false},
            11: {scored: false, disabled: false},
            12: {scored: false, disabled: false} },
            blue: { 2: {scored: false, disabled: false},
            3: {scored: false, disabled: false},
            4: {scored: false, disabled: false},
            5: {scored: false, disabled: false},
            6: {scored: false, disabled: false},
            7: {scored: false, disabled: false},
            8: {scored: false, disabled: false},
            9: {scored: false, disabled: false},
            10: {scored: false, disabled: false},
            11: {scored: false, disabled: false},
            12: {scored: false, disabled: false} }
        }

        var scores = {
            red: 0, 
            green: 0, 
            blue: 0,
            yellow: 0
        };

        function printScore(value, color) {
            var scoreList = {
                1: 1, 
                2: 3,
                3: 6, 
                4: 10, 
                5: 15, 
                6: 21, 
                7: 28, 
                8: 36, 
                9: 45, 
                10: 55, 
                11: 66, 
                12: 78  
            }; 

            $("#"+color+"-total").text(scoreList[value]); 
        }

        $(document).ready(function() {
           // On page load, disable the colored buttons
           $('.colored').attr('disabled', true); 
           // On press of roll, generate some dice

           $('.gameBoardColor').on('click', function(event) {
            var selectedColor = $(event.target).data('color');
            var selectedValue = $(event.target).data('value');
            var isDisabled = $(event.target).attr('disabled');

            var sum = window.colorValues.white1 + window.colorValues.white2;

            if(!isDisabled) {
                
                if(sum !== selectedValue) {
                    alert('You\'ve selected an invalid option')
                } else {
                    var element = score[selectedColor][selectedValue];
                    // a valid option 
                    if(element.scored === false && element.disabled === false) {

                        if(gameMode==='white') {
                            gameMode = 'everything'; 
                            $('#messageCenter p').text('Please select a white die and a color die, then select a color to play'); 
                        }

                        // mark the element that is scored as such
                        score[selectedColor][selectedValue].scored = true; 

                        // these next two if statements are marking the selected number
                        // as disabled, aka it's no longer a valid option
                        
                        if(selectedColor === 'red' || selectedColor === 'yellow') {
                            for(var i = selectedValue-1; i >= 2; i--){
                                $('button[data-color="'+selectedColor+'"][data-value="'+i+'"]').addClass('disabled'); 
                                score[selectedColor][i].disabled = true; 
                            }
                        }

                        if(selectedColor === 'green' || selectedColor === 'blue') {
                            for(var i = selectedValue+1; i <= 12; i++){
                                $('button[data-color="'+selectedColor+'"][data-value="'+i+'"]').addClass('disabled'); 
                                score[selectedColor][i].disabled = true; 
                            }
                        }

                        scores[selectedColor] += 1; 
                        printScore(scores[selectedColor], selectedColor); 

                        $('button[data-color="'+selectedColor+'"][data-value="'+selectedValue+'"]').text('x');
                    } else {
                        alert('Please select a valid option'); 
                    }
                }


            }
            
           }); 

           // This is where the game play begins
           $(document).on('diceRolled', function(){

            var sum = window.colorValues.white1 + window.colorValues.white2; 

            $('#messageCenter p').text(`You rolled a ${sum} on white, please select any color above or press the skip button.`)

           });
        });               
    </script>
</html>